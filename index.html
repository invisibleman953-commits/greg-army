<script>
const firebaseConfig = {
  apiKey: "AIzaSyDNEp1EgyNll0d7Pm-I_VDBAd7o6sgeE_Y",
  authDomain: "greg-clicker.firebaseapp.com",
  projectId: "greg-clicker",
  storageBucket: "greg-clicker.firebasestorage.app",
  messagingSenderId: "84612781202",
  appId: "1:84612781202:web:d11607b4500e43a186424b"
};

// Prevent double initialization
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}

const db = firebase.firestore();

async function updateLeaderboard() {
    try {
        const snapshot = await db.collection("scores")
            .orderBy("score", "desc")
            .limit(10)
            .get();

        const list = document.getElementById("leaderboardList");
        list.innerHTML = "";

        snapshot.forEach(doc => {
            const li = document.createElement("li");
            li.textContent = doc.id + ": " + doc.data().score;
            list.appendChild(li);
        });

    } catch (error) {
        console.error("Leaderboard error:", error);
    }
}

updateLeaderboard();
setInterval(updateLeaderboard, 10000);
</script>
